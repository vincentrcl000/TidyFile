# TidyFile 用户手册

## 📖 简介

TidyFile 是一个智能文件整理工具，使用AI技术帮您自动分类文件、生成摘要，让文件管理变得简单高效。

## 🚀 快速开始

### 启动程序

```bash
# 方式1：直接运行
python main.py

# 方式2：使用启动脚本
scripts/start_tidyfile.vbs
```

### 首次使用

1. **准备AI模型**：
   - 安装Ollama：https://ollama.ai/
   - 下载模型：`ollama pull qwen3:4b`
   - 启动服务：`ollama serve`

2. **开始使用**：
   - 选择源文件夹（要处理的文件）
   - 设置目标文件夹（分类结果）
   - 调整处理参数
   - 点击开始处理

## 🎯 主要功能

### AI智能分类
- **用途**：自动分析文件内容并分类
- **操作**：选择源文件夹 → 设置目标文件夹 → 开始分类
- **支持**：PDF、Word、TXT、图片、代码文件等

### 文件解读
- **用途**：批量生成文件内容摘要
- **操作**：选择文件夹 → 设置参数 → 开始解读
- **模式**：单线程（少量文件）、多线程（大量文件）

### 文章阅读助手
- **用途**：浏览和管理处理结果
- **访问**：启动服务器 → 浏览器访问 → 搜索筛选
- **特色**：局域网访问、移动端友好、智能预览

### 重复文件清理
- **用途**：检测和删除重复文件
- **操作**：选择文件夹 → 设置参数 → 查看结果 → 确认删除

### 微信文章管理
- **用途**：管理微信收藏的文章
- **操作**：导入JSON文件 → 生成AI摘要 → 管理分类
- **功能**：自动下载文章内容、生成AI摘要、生成本地静态HTML页面
- **特色**：支持离线阅读、与文章阅读助手无缝集成

## 📱 移动端使用

### 文章阅读助手

1. **启动服务器**：`python scripts/start_viewer_server.py`
2. **获取地址**：记下显示的局域网地址
3. **手机访问**：在手机浏览器中输入地址
4. **浏览文件**：支持搜索、筛选、预览、下载

### 特色功能
- **智能预览**：PDF、图片、视频等可直接预览
- **自动下载**：无法预览的文件自动下载
- **响应式设计**：适配各种屏幕尺寸

## 📱 微信文章管理详细使用

### 功能概述
微信文章管理功能需要先使用chatlog来获取微信里藏的文章，再调用AI来进行下载到本地、生成摘要，合并到文章阅读助手和本地文章一样查看。

### 操作步骤

1. **微信版本要求**
   - 下载安装微信电脑版4.0.3版本，关闭自动更新
   - 因为chatlog已不再更新，它并不支持最新版微信

2. **下载并开启chatlog**
   - 到[点这里跳转](https://github.com/sjzar/chatlog) 下载软件
   - 按照其指引启用，直到前四项功能都启用成功

3. **备份收藏的文章链接**
   - 在TidyFile-微信文章管理中，输入收藏文章的账号名（支持微信号、别名、昵称、备注名等）和时间区间
   - 点击收藏文章备份，正确获取收藏的文章链接后，后续的操作不再依赖微信和chatlog，都可以关闭

4. **备份文章解读**
   - 启动备份文章解读，TidyFile将下载对应的文章内容、调用AI生成摘要和本地静态HTML页面
   - 支持点击文章标题打开在线链接，或者离线情况点击路径打开本地静态页面来查看文章

5. **关于微信收藏的文件**
   - 微信传输的文件附件会不加密直接存在电脑上，所以无需用到chatlog
   - 只需要使用智能文件分类功能，将源文件目录选择到微信文件附件默认存储位置（通常在C:\Users\<你的用户名>\Documents\xwechat_files\<微信号或wxid_xxxxxxx>\msg\file）
   - 目标文件目录选择你已经整理好的文件目录，即可根据文件内容智能迁移到对应的目录中

6. **安全性说明**
   - TidyFile、chatlog完全本地化运行，理论上无风险
   - 请保障在安全的系统环境中使用

## ⚙️ 配置说明

### AI模型配置
```json
{
  "models": [
    {
      "id": "ollama-local",
      "name": "本地Ollama模型",
      "base_url": "http://localhost:11434",
      "model_name": "qwen3:4b",
      "enabled": true
    }
  ]
}
```

### 分类规则配置
```json
{
  "工作文档": {
    "description": "工作相关的文档、报告、项目资料等",
    "keywords": ["工作", "项目", "报告", "会议", "计划"]
  }
}
```

## 🔧 常见问题

### 启动问题
**Q: 程序无法启动？**
A: 检查Python环境，确保已安装依赖包

**Q: AI模型无法连接？**
A: 确保Ollama服务已启动，模型已下载

### 使用问题
**Q: 文件处理失败？**
A: 检查文件权限，确认格式支持

**Q: 局域网访问失败？**
A: 检查防火墙设置，确认IP地址正确

### 性能问题
**Q: 处理速度慢？**
A: 使用多线程模式，减少内容截取长度

**Q: 内存占用高？**
A: 分批处理文件，关闭其他程序

## 📞 技术支持

### 获取帮助
- **查看日志**：检查 `logs/` 目录下的日志文件
- **重启程序**：关闭程序重新启动
- **检查配置**：确认配置文件正确

### 更多文档
- **[详细帮助文档](详细帮助文档.md)** - 完整的技术文档
- **[项目结构](PROJECT_STRUCTURE.md)** - 代码架构说明

---

**版本**：2.0.0  
**更新时间**：2025-08-05  
**适用系统**：Windows 10/11