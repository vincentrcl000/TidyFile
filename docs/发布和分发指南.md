# TidyFile 发布和分发指南

## 📦 支持的安装模式

### 1. 源代码安装
- **适用场景**：开发者、高级用户
- **安装方式**：`pip install -e .`
- **优势**：可修改源码、调试方便

### 2. PyPI 包安装
- **适用场景**：Python 用户
- **安装方式**：`pip install tidyfile`
- **优势**：标准化安装、自动依赖管理

### 3. 可执行文件安装（推荐）
- **适用场景**：普通用户、非技术用户
- **安装方式**：下载对应平台的可执行文件
- **优势**：无需安装Python、开箱即用

## 🚀 GitHub Releases 支持

### 自动构建流程

GitHub Actions 会自动为每个 Release 构建以下文件：

#### Windows
- `TidyFile-Windows-x64.exe` - 便携版可执行文件
- `TidyFile-Windows-x64.zip` - 压缩包版本
- `TidyFile-Windows-Installer.zip` - 完整安装包（包含桌面快捷方式）

## 🛠️ 构建配置

### PyInstaller 配置

```python
# build_config.py
import PyInstaller.__main__
import sys
import os

def build_executable():
    PyInstaller.__main__.run([
        'main.py',
        '--onefile',
        '--windowed',
        '--name=TidyFile',
        '--icon=resources/TidyFile.ico',
        '--add-data=resources;resources',
        '--hidden-import=tkinter',
        '--hidden-import=ttkbootstrap',
        '--hidden-import=flask',
        '--hidden-import=requests',
        '--hidden-import=PIL',
        '--hidden-import=PyPDF2',
        '--hidden-import=docx',
        '--clean',
        '--distpath=dist',
        '--workpath=build'
    ])

if __name__ == '__main__':
    build_executable()
```

### Windows 构建脚本

```bash
# Windows 构建
pyinstaller --onefile --windowed --name=TidyFile-Windows-x64 --icon=resources/TidyFile.ico main.py
```

## 📋 发布检查清单

### 发布前准备
- [ ] 更新版本号（setup.py, __init__.py）
- [ ] 更新 CHANGELOG.md
- [ ] 测试所有功能
- [ ] 检查依赖完整性
- [ ] 验证多语言支持

### 构建测试
- [ ] Windows 可执行文件测试
- [ ] 便携模式测试
- [ ] 安装包测试
- [ ] 桌面快捷方式测试

### 发布步骤
1. **创建 Git 标签**
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```

2. **触发 GitHub Actions**
   - 自动构建所有平台版本
   - 运行测试套件
   - 生成发布包

3. **创建 GitHub Release**
   - 上传构建的文件
   - 编写发布说明
   - 标记为正式版本

## 🔧 用户安装指南

### Windows 用户
1. **便携版**：下载 `TidyFile-Windows-x64.exe`，双击运行
2. **压缩包**：下载 `TidyFile-Windows-x64.zip`，解压后运行
3. **安装包**：下载 `TidyFile-Windows-Installer.zip`（推荐）
   - 解压到任意位置
   - 运行 `create_desktop_shortcuts.py` 创建桌面快捷方式
   - 双击桌面上的 "TidyFile" 或 "Article Reader" 图标启动

### 系统要求
- Windows 10/11
- 4GB+ 内存
- 1GB+ 可用磁盘空间

## 📊 分发统计

### 下载统计
- 通过 GitHub Releases 页面统计
- 支持按平台、版本分类统计
- 可集成 Google Analytics

### 用户反馈
- GitHub Issues 收集问题
- 用户评分和评论
- 功能请求跟踪

## 🔄 持续集成

### 自动化流程
1. **代码提交** → 触发测试
2. **标签创建** → 触发构建
3. **构建完成** → 自动发布
4. **发布完成** → 通知用户

### 质量保证
- 自动化测试覆盖
- 代码质量检查
- 安全漏洞扫描
- 依赖更新检查

## 📈 版本管理

### 版本号规范
- 主版本.次版本.修订版本
- 示例：1.0.0, 1.1.0, 1.0.1

### 发布周期
- **主版本**：重大功能更新
- **次版本**：新功能添加
- **修订版本**：Bug修复

### 兼容性
- Windows 10/11 兼容性保证
- 向后兼容性保证
- 迁移指南提供
- 废弃功能通知

---

**版本**：1.0.0  
**更新时间**：2025-08-05  
**维护者**：AI Assistant 