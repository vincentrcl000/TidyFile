# TidyFile 发布指南

## 📋 发布前准备

### 1. 版本号更新
- 更新 `setup.py` 中的版本号
- 更新 `src/tidyfile/__init__.py` 中的版本号
- 更新 `CHANGELOG.md` 记录变更

### 2. 代码检查
```bash
# 运行测试
pytest tests/ -v

# 代码格式检查
black --check .
flake8 .

# 类型检查
mypy --ignore-missing-imports .
```

### 3. 本地构建测试
```bash
# Windows
scripts/build.bat

# 或手动构建
python scripts/build_executables.py
```

## 🚀 创建 GitHub Release

### 1. 创建 Git 标签
```bash
# 提交所有更改
git add .
git commit -m "chore: prepare for release v1.0.0"

# 创建标签
git tag v1.0.0

# 推送标签
git push origin v1.0.0
```

### 2. 在 GitHub 上创建 Release

1. 访问 GitHub 仓库页面
2. 点击 "Releases" 标签
3. 点击 "Create a new release"
4. 选择刚才创建的标签 `v1.0.0`
5. 填写发布信息：

**标题**: `TidyFile v1.0.0`

**描述**:
```markdown
## 🎉 TidyFile v1.0.0 正式发布

### ✨ 新功能
- 支持多语言界面（中文/英文）
- 新增便携模式，无需安装
- 优化AI模型配置管理
- 改进文件分类算法

### 🐛 修复
- 修复文件路径处理问题
- 优化内存使用
- 改进错误处理

### 📦 下载

#### Windows 用户
- [TidyFile-Windows-x64.exe](link) - 便携版可执行文件
- [TidyFile-Windows-x64.zip](link) - 压缩包版本
- [TidyFile-Windows-Installer.zip](link) - 完整安装包（推荐）

### 🚀 快速开始
1. 下载对应平台的文件
2. 解压或直接运行
3. 配置AI模型（推荐使用Ollama）
4. 开始使用！

### 📚 文档
- [用户手册](docs/用户手册.md)
- [详细帮助文档](docs/详细帮助文档.md)
- [项目结构说明](docs/PROJECT_STRUCTURE.md)

### 🤝 反馈
如有问题或建议，欢迎提交 [Issue](link) 或 [Pull Request](link)。
```

6. 选择 "This is a pre-release" 或 "This is a latest release"
7. 点击 "Publish release"

### 3. 自动构建流程

创建 Release 后，GitHub Actions 会自动：

1. **触发构建任务**
   - 在 Windows、macOS、Linux 平台上构建
   - 生成可执行文件和分发包

2. **上传构建产物**
   - 自动上传到 Release 页面
   - 提供下载链接

3. **发布到 PyPI**（可选）
   - 如果配置了 PyPI token，会自动发布 Python 包

## 📦 手动构建（备用方案）

如果自动构建失败，可以手动构建：

### Windows 构建
```bash
# 安装依赖
pip install pyinstaller

# 构建
pyinstaller --onefile --windowed --name=TidyFile-Windows-x64 --icon=resources/TidyFile.ico main.py

# 创建ZIP包
cd dist
powershell Compress-Archive -Path "TidyFile-Windows-x64.exe" -DestinationPath "TidyFile-Windows-x64.zip"

# 创建安装包
python scripts/create_installer_package.py
```

## 🔧 发布后检查

### 1. 下载测试
- 从 Release 页面下载各个平台的文件
- 在不同系统上测试运行
- 验证基本功能正常

### 2. 文档更新
- 更新下载链接
- 检查安装说明
- 更新版本信息

### 3. 社区通知
- 在相关论坛发布公告
- 更新项目主页
- 发送邮件通知（如果有邮件列表）

## 📊 发布统计

### 下载统计
GitHub 会自动统计每个 Release 的下载次数：
- 访问 Release 页面查看下载统计
- 可以按文件类型分析用户偏好

### 用户反馈
- 监控 GitHub Issues
- 收集用户评价
- 跟踪功能请求

## 🔄 持续发布

### 自动化建议
1. **语义化版本**：使用 `v1.0.0` 格式
2. **变更日志**：每次发布更新 CHANGELOG.md
3. **测试覆盖**：确保新功能有测试
4. **文档同步**：及时更新相关文档

### 发布频率
- **主版本**：重大功能更新（3-6个月）
- **次版本**：新功能添加（1-2个月）
- **修订版本**：Bug修复（按需发布）

---

**版本**：1.0.0  
**更新时间**：2025-08-05  
**维护者**：AI Assistant 